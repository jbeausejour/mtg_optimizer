(this.webpackJsonpmtg_optimizer=this.webpackJsonpmtg_optimizer||[]).push([[0],{199:function(e,t,c){"use strict";c.r(t);var a=c(0),r=c.n(a),s=c(43),n=c.n(s),i=c(126),o=c(44),d=c(216),l=c(157),j=c(204),h=c(206),b=c(212),O=c(14);var x=()=>Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Dashboard"}),Object(O.jsxs)(j.a,{gutter:16,children:[Object(O.jsx)(h.a,{span:8,children:Object(O.jsx)(b.a,{title:"Total Sites",bordered:!1,children:"10"})}),Object(O.jsx)(h.a,{span:8,children:Object(O.jsx)(b.a,{title:"Total Cards",bordered:!1,children:"150"})}),Object(O.jsx)(h.a,{span:8,children:Object(O.jsx)(b.a,{title:"Latest Scrape",bordered:!1,children:"2024-06-23"})})]})]}),p=c(215),m=c(63),u=c(217),y=c(214);var f=()=>{const[e,t]=Object(a.useState)([]),[c,r]=Object(a.useState)([]),[s,n]=Object(a.useState)(null),[i,o]=Object(a.useState)(null),[d,l]=Object(a.useState)(null),[x,f]=Object(a.useState)(!1);Object(a.useEffect)((()=>{fetch("/api/cards").then((e=>e.json())).then((e=>t(e))).catch((e=>console.error("Error fetching cards:",e))),fetch("/api/sites").then((e=>e.json())).then((e=>r(e))).catch((e=>console.error("Error fetching sites:",e)))}),[]);const g=async e=>{n(e);try{const t=await(async e=>{const t=await fetch("https://api.mtgstocks.com/v1/cards?name=".concat(e));if(!t.ok)throw new Error("Failed to fetch MTG Stocks data");return await t.json()})(e.card),c=await(async e=>{const t=await fetch("https://api.scryfall.com/cards/named?exact=".concat(e));if(!t.ok)throw new Error("Failed to fetch Scryfall data");return await t.json()})(e.card);o(t),l(c),f(!0)}catch(t){p.a.error("Error fetching card data")}},S=()=>{f(!1),o(null),l(null)};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Optimize"}),Object(O.jsx)(m.a,{type:"primary",onClick:async()=>{try{const e=await fetch("/api/optimize",{method:"POST"});await e.json();p.a.success("Optimization completed successfully!")}catch(e){p.a.error("Optimization failed!"),console.error("Error during optimization:",e)}},children:"Run Optimization"}),Object(O.jsxs)(j.a,{gutter:16,children:[Object(O.jsx)(h.a,{span:12,children:Object(O.jsx)(b.a,{title:"MTG Card List",children:Object(O.jsx)(u.a,{bordered:!0,dataSource:e,renderItem:e=>Object(O.jsx)(u.a.Item,{onClick:()=>g(e),children:e.card})})})}),Object(O.jsx)(h.a,{span:12,children:Object(O.jsx)(b.a,{title:"Site List",children:Object(O.jsx)(u.a,{bordered:!0,dataSource:c,renderItem:e=>Object(O.jsx)(u.a.Item,{children:e.name})})})})]}),Object(O.jsxs)(y.a,{title:s?s.card:"",visible:x,onCancel:S,footer:[Object(O.jsx)(m.a,{onClick:S,children:"Close"},"close")],children:[i&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"MTG Stock Data"}),Object(O.jsx)("pre",{children:JSON.stringify(i,null,2)})]}),d&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Scryfall Data"}),Object(O.jsx)("pre",{children:JSON.stringify(d,null,2)})]})]})]})},g=c(213),S=c(183),k=c(211),w=c(218),I=c(219);var v=()=>{const[e,t]=Object(a.useState)([]),[c,r]=Object(a.useState)(!1),[s]=g.a.useForm();Object(a.useEffect)((()=>{n()}),[]);const n=async()=>{try{const e=await fetch("/get_site_list");if(e.ok){const c=await e.json();t(c.map((e=>({...e,key:e.id}))))}else p.a.error("Failed to fetch site list")}catch(e){console.error("Error fetching site list:",e),p.a.error("Error fetching site list")}},i=async e=>{try{(await fetch("/update_site/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?p.a.success("Site updated successfully"):p.a.error("Failed to update site")}catch(t){console.error("Error updating site:",t),p.a.error("Error updating site")}},o=[{title:"Name",dataIndex:"name",key:"name",editable:!0},{title:"URL",dataIndex:"url",key:"url",editable:!0},{title:"Parse Method",dataIndex:"parse_method",key:"parse_method",editable:!0},{title:"Type",dataIndex:"type",key:"type",editable:!0}].map((e=>e.editable?{...e,onCell:t=>({record:t,dataIndex:e.dataIndex,title:e.title,editing:c})}:e));return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Site Management"}),Object(O.jsx)(m.a,{type:"primary",icon:c?Object(O.jsx)(w.a,{}):Object(O.jsx)(I.a,{}),onClick:()=>{if(c)(async()=>{try{const c=await s.validateFields(),a=e.map((e=>({...e,...c[e.key]})));t(a);for(const e of a)await i(e);r(!1)}catch(c){console.log("Validate Failed:",c)}})();else{const t=e.reduce(((e,t)=>(e[t.key]=t,e)),{});s.setFieldsValue(t),r(!0)}},children:c?"Save All":"Edit Mode"}),Object(O.jsx)(g.a,{form:s,component:!1,children:Object(O.jsx)(k.a,{components:{body:{cell:e=>{let{editing:t,dataIndex:c,title:a,record:r,children:s,...n}=e;return Object(O.jsx)("td",{...n,children:t?Object(O.jsx)(g.a.Item,{name:[r.key,c],style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(a,"!")}],children:Object(O.jsx)(S.a,{})}):s})}}},bordered:!0,dataSource:e,columns:o,rowClassName:"editable-row",pagination:!1})})]})};var E=()=>{const[e,t]=Object(a.useState)([]);return Object(a.useEffect)((()=>{fetch("/api/results").then((e=>e.json())).then((e=>t(e))).catch((e=>console.error("Error fetching results:",e)))}),[]),Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Optimization Results"}),Object(O.jsx)(u.a,{bordered:!0,dataSource:e,renderItem:e=>Object(O.jsx)(u.a.Item,{children:Object(O.jsx)("pre",{children:JSON.stringify(e,null,2)})})})]})};const{Header:z,Content:C,Footer:T}=d.a;var F=function(){return Object(O.jsx)(i.a,{children:Object(O.jsxs)(d.a,{className:"layout",children:[Object(O.jsx)(z,{children:Object(O.jsxs)(l.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(O.jsx)(l.a.Item,{children:Object(O.jsx)(i.b,{to:"/dashboard",children:"Dashboard"})},"1"),Object(O.jsx)(l.a.Item,{children:Object(O.jsx)(i.b,{to:"/optimize",children:"Optimize"})},"2"),Object(O.jsx)(l.a.Item,{children:Object(O.jsx)(i.b,{to:"/site-management",children:"Site Management"})},"3"),Object(O.jsx)(l.a.Item,{children:Object(O.jsx)(i.b,{to:"/results",children:"Results"})},"4")]})}),Object(O.jsx)(C,{style:{padding:"0 50px"},children:Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/",exact:!0,component:x}),Object(O.jsx)(o.a,{path:"/dashboard",component:x}),Object(O.jsx)(o.a,{path:"/optimize",component:f}),Object(O.jsx)(o.a,{path:"/site-management",component:v}),Object(O.jsx)(o.a,{path:"/results",component:E})]})}),Object(O.jsx)(T,{style:{textAlign:"center"},children:"MTG Scraper \xa92024"})]})})};c(198);n.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(F,{})}),document.getElementById("root"))}},[[199,1,2]]]);
//# sourceMappingURL=main.2177e8c2.chunk.js.map